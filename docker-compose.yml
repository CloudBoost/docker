#Install MongoDB
mongo:
  image: mongo:3.2
  ports:
  - "27017:27017"
  volumes:
  - /var/lib/mongodb:/var/lib/mongodb
  restart: always



#Install Redis
redis:
  image: redis:3.0
  ports:
  - "6379:6379"
  - "16379:16379"
  - "26379:26379"
  restart: always



#Install CloudBoost Engine
cloudboost: 
  image: cloudboost/cloudboost:latest
  command: export CLOUDBOOST_PUBLIC_IP=$(wget http://ipinfo.io/ip -qO -)
  command: npm start
  ports:
  - "4730:4730"
  expose:
  - "4730"
  links:
  - "mongo"
  - "redis"
  restart: always
  tty: true
  
#Install CloudBoost User Service
cloudboost-user-service: 
  image: cloudboost/user-service:latest
  command: export CLOUDBOOST_PUBLIC_IP=$(wget http://ipinfo.io/ip -qO -)
  command: npm start
  ports:
  - "3000:3000"
  expose:
  - "3000"
  links:
  - "cloudboost"
  - "mongo"
  - "redis"
  restart: always
  tty: true

#Install CloudBoost Dashboard
cloudboost-dashboard: 
  image: cloudboost/dashboard:latest
  command: export CLOUDBOOST_PUBLIC_IP=$(wget http://ipinfo.io/ip -qO -)
  command: npm start
  ports:
  - "80:1440"
  expose:
  - "80"
  links:
  - "cloudboost"
  - "cloudboost-user-service"
  restart: always
  tty: true

#Watchtower to update containers automatically. 
watchtower:
  image: centurylink/watchtower:latest
  volumes:
    - /var/run/docker.sock:/var/run/docker.sock
  restart: always
   
